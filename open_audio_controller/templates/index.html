<!DOCTYPE html>
<html>

<head>
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
   
    <div id="content">
        <img src="static/IBMlogo.png" class="center" > 
        <br> 
        <br>      
        <button class = "centered" onclick="activationButton(event)">Activate Noise Cancellation</button>
         
    </div>

    <script type="text/javascript">
        let controllerState = false;
        async function activationButton(ev) {
            ev.preventDefault()
            
            if (controllerState) {
                ev.target.innerText = 'Activate Noise Cancellation'
                controllerState = false;
            } else {
                ev.target.innerText = 'Deactivate Noise Cancellation'
                controllerState = true;
            }
            post("{{url_for('controller_state')}}", ({state: controllerState}))
        }

        async function post(route, data) {
            var xhr = new XMLHttpRequest();
            xhr.open('POST', route)
            xhr.setRequestHeader("Content-Type", "application/json")
            xhr.send(JSON.stringify(data))
        }
    </script>
</body>

</html>